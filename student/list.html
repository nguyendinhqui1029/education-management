<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Students</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="../css/student.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    </head>
    <body> 
        <div class="content-wrapper">
            <div class="studentMenu"> 
                <div class="Search">
                    <form action="/search" method="get" style="position: relative;">
                    <i style="position: absolute; top: 15px; left: 13px; z-index: 10;" class="fas fa-search"></i>
                    <input style="width: 100%;" type="search" id="search" name="q" placeholder="     Search here..." aria-label="Search">
                </form>
                </div>
                <div class="optionMenu">
                    <button>Newest <span><i class="fa-solid fa-caret-down"></i></span></button>
                    <button class="addSt"><span><i class="fa-solid fa-plus"></i></span> New Student</button>
                </div>
            </div>
            <table class="student-table" id="myTable">
                <thead class="table-header">
                    <td>
                        <input class="checkbox-item" type="checkbox" id="check-all"/>
                    </td>
                    <td>Name</td>
                    <td>ID</td>
                    <td>Date</td>
                    <td>Parent Name</td>
                    <td>City</td>
                    <td>Contract</td>
                    <td>Grade</td>
                    <td>Action</td>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    
    <script>
        const dataMock = [
            {id: 123456789, name: 'Name 1', avatar: '1', date: 'Match 25, 2024', parentName: 'parentName', city: 'city', grade: 'VII_A'},
            {id: 123456790, name: 'Name 2', avatar: '2', date: 'Match 25, 2024', parentName: 'parentName', city: 'city', grade: 'VII_B'},
            {id: 123456791, name: 'Name 3', avatar: '3', date: 'Match 25, 2024', parentName: 'parentName', city: 'city', grade: 'VII_C'}
        ];
        var table = document.getElementById("myTable");
        var checkboxAllElement = document.getElementById("check-all");
        var tbody = table.getElementsByTagName("tbody")[0];
        var countSelectedItem = 0;
        function checkBoxClick(event) {
            console.log(event)
        }

        checkboxAllElement.addEventListener("change", function() {
            if (checkboxAllElement.checked) {
                dataMock.forEach(item=>{
                    const element = document.getElementById(`checkbox_${item.id}`);
                    element.checked = true;
                    const cellElement = document.getElementById(`cell_${item.id}`);
                    cellElement.classList.add('active-checkbox');
                })
            } else {
                dataMock.forEach(item=>{
                    const element = document.getElementById(`checkbox_${item.id}`);
                    element.checked = false;
                    const cellElement = document.getElementById(`cell_${item.id}`);
                    cellElement.classList.remove('active-checkbox');
                })
            }
        });

        dataMock.forEach(item=>{
            var newRow = tbody.insertRow(); 
            var cell1 = newRow.insertCell(0); // Ô thứ 1
            var cell2 = newRow.insertCell(1); // Ô thứ 2
            var cell3 = newRow.insertCell(2); // Ô thứ 3
            var cell4 = newRow.insertCell(3); // Ô thứ 4
            var cell5 = newRow.insertCell(4); // Ô thứ 5
            var cell6 = newRow.insertCell(5); // Ô thứ 6
            var cell7 = newRow.insertCell(6); // Ô thứ 6
            var cell8 = newRow.insertCell(7); // Ô thứ 7
            var cell9 = newRow.insertCell(8); // Ô thứ 8


            cell1.id = `cell_${item.id}`;
            cell1.innerHTML = `<input class="checkbox-item" id="checkbox_${item.id}" type="checkbox" data-checkboxId="${item.id}"/>`;
            var checkbox = document.getElementById(`checkbox_${item.id}`);
            checkbox.addEventListener("change", function() {
                const cellActive = document.getElementById(`cell_${item.id}`);
                if (checkbox.checked) {
                    cellActive.classList.add('active-checkbox');
                    countSelectedItem++;
                } else {
                    cellActive.classList.remove('active-checkbox');
                    countSelectedItem--;
                }
                if(countSelectedItem === dataMock.length) {
                    checkboxAllElement.checked = true;
                    return;
                }
                checkboxAllElement.checked = false;
            });
            
            cell2.innerHTML = `<img class="avatar" alt="${item.avatar}" src='${item.avatar}'></div><span>${item.name}</span>`;
            cell2.classList='column-name';

            cell3.innerHTML = `#${item.id}`;
            cell3.classList='column-id';

            cell4.innerHTML = item.date;
            cell4.classList='column-date';

            cell5.innerHTML = item.parentName;
            cell5.classList='column-parent-name';

            cell6.innerHTML = item.city;
            cell6.classList = 'column-city'

            cell7.innerHTML =  `<div class="column-contact"><i class="phone-icon fa-solid fa-phone icon" data-id="${item.id}"></i><i data-id="${item.id}" class="email-icon fa-solid fa-envelope icon"></i></div>`;

            cell8.innerHTML = `<div class="${item.grade === 'VII_A' ? 'grade-a' : item.grade === 'VII_B' ? 'grade-b': 'grade-c'}">${item.grade.replace('_', ' ')}</div>`;

            cell9.innerHTML = '<i class="menu-icon fa-solid fa-ellipsis"></i>';
            cell9.classList= 'action-content'
        });
    </script>
    </body>
</html>